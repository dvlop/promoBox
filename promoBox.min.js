/*
 * promoBox v1.5 - Simple JavaScript Promo Popup
 * https://github.com/rolandtoth/promoBox
 * last update: 2014.06.23.
 *
 * Licensed under the MIT license.
 * Copyright 2014 Roland Toth (tpr)
 *
 */
if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c,d){"use strict";var a=d||0,b=this.length;for(a;a<b;a=a+1)
if(this[a]===c)return a;return-1};var promoBox=function(l){"use strict";var e,k,p,s,r=document.getElementsByTagName(
"head")[0],q=document.body,o=window.location.href;e={cookie:{createCookie:function(d,f,b){var c="",a;if(b&&b!=="session"
){a=new Date();a.setTime(a.getTime()+b*24*60*60*1000);c="; expires="+a.toGMTString()}document.cookie=d+"="+f+c+
"; path=/;"},readCookie:function(f){var b,a,d=f+"=",c=document.cookie.split(";");for(b=0;b<c.length;b+=1){a=c[b];while(a
.charAt(0)===" ")a=a.substring(1,a.length);if(a.indexOf(d)===0)return a.substring(d.length,a.length)}return null},
eraseCookie:function(a){this.createCookie(a,"",-1)}},addEvent:function(a,b,c){if(a.addEventListener)a.addEventListener(b
,c,false);else a.attachEvent("on"+b,function(t){return c.call(a,t)})},addClass:function(b,a){b.className+=" "+a},
makeElement:function(f,b,d){var c=document.createElement(f),a;for(a in b)if(b.hasOwnProperty(a))if(b[a])c.setAttribute(a
,b[a]);if(d)c.innerHTML=d;return c},callCallBack:function(a){if(typeof window[a]==="function")window[a]()},loadSprite:
function(c,b){var a=new Image();a.onload=b;a.src=c},isArray:function(a){return Object.prototype.toString.call(a)===
"[object Array]"},findInArray:function(a,c){var b;if(!a)return false;if(e.isArray(a)&&a.length===0)return false;a=typeof
 a==="string"?[a]:a;for(b=0;b<a.length;b=b+1)if(c.indexOf(a[b])!==-1)return true;return false},preventDefault:function(a
){if(a.preventDefault)a.preventDefault();else a.returnValue=false},checkFrequency:function(a){var b=Math.floor(Math.
random()*(1/a));return b===0}};k={addStyles:function(){if(l.disableStyles)return false;var a=[
"#promoContainer { opacity: 0; position: fixed; width: 100%; height: 100%; text-align: center; top: 0; left: 0; z-index: 9991; pointer-events: none; }"
,
'#promoOverlay { position: fixed; width: 100%; height: 100%; top: 0; left: 0; zoom: 1; z-index: 9990; background: #000; background: rgba(0, 0, 0, 0.6); -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)"; filter: alpha(opacity=60); pointer-events: all; }'
,
"#promoContent { position: relative; display: inline-block; top: 10%; max-width: 80%; height: auto; z-index: 9992; pointer-events: all; }"
,
"#promoImage { height: auto; width: auto; max-width: 100%; max-height: 75%; box-sizing: border-box; display: block; border: 8px solid #fff; }"
,
"#promoClose { position: absolute; top: 0; right: 0; display: block; line-height: 16px; text-align: right; padding: 24px 28px; color: #000; z-index: 9992; font-family: sans-serif; font-size: 17px; opacity: 0.6; transition: 0.1s all; text-decoration: none; }"
,"#promoClose:hover { opacity: 1; cursor: pointer; }",
"#promoButtons { position: absolute; bottom: 0; width: 100%; padding: 24px 0; }",
"#promoButtons a { display: inline-block; text-decoration: none; padding: 5px 16px; background: #fff; text-align: center; margin: 0 6px; color: #000; }"
].join("");if(l.interstitialDuration)a+=[
'#promoOverlay { background: #fff; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; filter: alpha(opacity=100);}'
,"#interstitialText { z-index: 9998; position: fixed; top: 0; left: 0; width: 100%; pointer-events: all; }",
"#interstitialSkipText { text-decoration: underline; color: inherit; }","#promoImage { border: none; }"].join("");if(l.
fadeInDuration>0)a+=[("#promoContainer { -webkit-animation: promoFadeIn "+l.fadeInDuration+
"s ease-in; animation: promoFadeIn "+l.fadeInDuration+
"s ease-in; -webkit-animation-fill-mode: forwards; animation-fill-mode: forwards; }"),
"@-webkit-keyframes promoFadeIn { from {opacity: 0} to {opacity: 1} }",
"@keyframes promoFadeIn { from {opacity: 0} to {opacity: 1} }"].join("");else a+="#promoContainer { opacity: 1 }";if(l.
fadeOutDuration>0)a+=[("#promoContainer.fadeOut { -webkit-animation: promoFadeOut "+l.fadeOutDuration+
"s ease-out; animation: promoFadeOut "+l.fadeOutDuration+"s ease-out; }"),
"@-webkit-keyframes promoFadeOut { from {opacity: 1} to {opacity: 0} }",
"@keyframes promoFadeOut { from {opacity: 1} to {opacity: 0} }"].join("");if(!l.showScrollbar){a+=
"body { overflow: hidden; }";if(window.innerHeight<q.scrollHeight)a+="body { width: "+q.offsetWidth+"px; }"}k.styles=e.
makeElement("style",{id:"promoStyle",type:"text/css"});if(k.styles.styleSheet)k.styles.styleSheet.cssText=a;else k.
styles.appendChild(document.createTextNode(a));if(r.firstChild)r.insertBefore(k.styles,r.firstChild);else r.appendChild(
k.styles)},init:function(){var d,b,g,h,f,c=Math.round(new Date().getTime()/1000);l.imagePath=l.imagePath||null;l.link=l.
link||null;l.target=l.target||"_self";l.actionButtons=l.actionButtons||null;l.className=l.className||null;l.
disableOverlay=l.disableOverlay||null;l.disableOverlayClose=l.disableOverlayClose||null;l.disableStyles=l.disableStyles
||null;l.disableCloseButton=l.disableCloseButton||null;l.closeButtonText=l.closeButtonText||null;l.showOnUrl=l.showOnUrl
||null;l.hideOnUrl=l.hideOnUrl||null;l.forceOnUrl=l.forceOnUrl||null;l.deleteCookieOnUrl=l.deleteCookieOnUrl||null;l.
showScrollbar=l.showScrollbar||false;l.randomFrequency=l.randomFrequency||1;l.startDate=l.startDate||null;l.endDate=l.
endDate||null;l.cookieLifetime=l.cookieLifetime||null;l.fadeInDuration=l.fadeInDuration||0;l.fadeOutDuration=l.
fadeOutDuration||0;l.loadDelay=l.loadDelay||null;l.interstitialDuration=l.interstitialDuration||null;l.
interstitialSkipText=l.interstitialSkipText||"Skip this ad";l.interstitialText=l.interstitialText||"or wait %s secs";l.
autoCloseSeconds=l.autoCloseSeconds||null;g=l.randomFrequency&&!e.checkFrequency(l.randomFrequency);d=!!l.forceOnUrl&&e.
findInArray(l.forceOnUrl,o);b=!!l.deleteCookieOnUrl&&e.findInArray(l.deleteCookieOnUrl,o);h=(function(a){if(!a||e.
isArray(a)&&!a.length)return false;if(!!a&&!e.findInArray(a,o))return true})(l.showOnUrl);f=!!l.hideOnUrl&&e.findInArray
(l.hideOnUrl,o);if(!l.imagePath)return false;if(!d){if(g)return false;if(l.startDate){l.startDate=Math.round(new Date(l.
startDate).getTime()/1000);if(c<l.startDate)return false}if(l.endDate){l.endDate=Math.round(new Date(l.endDate).getTime(
)/1000);if(c>l.endDate)return false}if(l.cookieLifetime){if(e.cookie.readCookie("promoBox"))return false;if(!b)e.cookie.
createCookie("promoBox","1",l.cookieLifetime)}if(h)return false;if(f)return false}if(b)e.cookie.eraseCookie("promoBox");
if(l.interstitialDuration){l.disableOverlay=false;l.disableOverlayClose=true;l.disableCloseButton=true;l.closeButtonText
=null;l.autoCloseSeconds=l.interstitialDuration}return true},buildPromo:function(){var a=0;this.promo={overlay:e.
makeElement("div",{id:"promoOverlay"}),container:e.makeElement("div",{id:"promoContainer"}),content:e.makeElement("div",
{id:"promoContent"}),image:e.makeElement("img",{id:"promoImage",src:l.imagePath}),close:e.makeElement("a",{id:
"promoClose",href:"#"},l.closeButtonText||"\xD7"),buttons:e.makeElement("div",{id:"promoButtons"})};if(l.
interstitialDuration){this.promo.interstitialCounter='<span id="interstitialCounter">'+l.interstitialDuration+"</span>";
l.interstitialText=l.interstitialText.replace("%s",this.promo.interstitialCounter);this.promo.interstitialText=e.
makeElement("p",{id:"interstitialText"},"&nbsp;"+l.interstitialText);this.promo.interstitialSkipText=e.makeElement("a",{
id:"interstitialSkipText",href:"#"},l.interstitialSkipText);this.promo.interstitialText.insertBefore(this.promo.
interstitialSkipText,this.promo.interstitialText.firstChild);this.promo.container.appendChild(this.promo.
interstitialText);e.addClass(this.promo.container,"interstitial")}if(l.link){this.promo.link=e.makeElement("a",{id:
"promoLink",href:l.link,target:l.target});this.promo.content.appendChild(this.promo.link);this.promo.link.appendChild(
this.promo.image)}else this.promo.content.appendChild(this.promo.image);if(!l.disableOverlay)this.promo.container.
appendChild(this.promo.overlay);if(!l.disableCloseButton)this.promo.content.appendChild(this.promo.close);if(l.
actionButtons&&l.actionButtons.length){for(a=0;a<l.actionButtons.length;a=a+1)this.promo.buttons.appendChild(e.
makeElement("a",{href:l.actionButtons[a][1]||"#promoClose",target:l.actionButtons[a][2]||"","class":l.actionButtons[a][3
]||""},l.actionButtons[a][0]));this.promo.content.appendChild(this.promo.buttons)}if(l.className)e.addClass(this.promo.
container,l.className);this.promo.container.appendChild(this.promo.content);q.appendChild(this.promo.container)},
addListeners:function(){var a,c=document.getElementById("promoButtons"),d=function(b){return k.events.openLink(b,this.
href||"#promoClose",this.target||"_self")};if(!l.disableCloseButton)e.addEvent(this.promo.close,"click",this.events.
close);if(!l.disableOverlayClose)e.addEvent(this.promo.overlay,"click",this.events.close);if(c&&c.childNodes)for(a=0;a<c
.childNodes.length;a=a+1)e.addEvent(c.childNodes[a],"click",d);if(l.link)e.addEvent(this.promo.link,"click",function(b){
k.events.openLink(b,l.link,l.target)});if(!l.disableKeyClose)e.addEvent(document,"keydown",this.events.keyClose);if(l.
interstitialDuration){e.addEvent(this.promo.interstitialSkipText,"click",this.events.close);s=setInterval(function(){var
 b=document.getElementById("interstitialCounter");if(b&&b.innerHTML>0)b.innerHTML=b.innerHTML-1;else return false},1000)
}if(l.autoCloseSeconds)this.events.autoClose()},events:{destroyPromo:function(){if(k.promo.container)q.removeChild(k.
promo.container);if(k.styles)k.styles.parentNode.removeChild(k.styles);k=null},close:function(a){if(a)e.preventDefault(a
);if(!k)return false;e.callCallBack("promoBoxClose");if(k.promo.container)if(l.fadeOutDuration>0){e.addClass(k.promo.
container,"fadeOut");setTimeout(function(){if(k)k.events.destroyPromo()},l.fadeOutDuration*1000)}else k.events.
destroyPromo();if(p)clearTimeout(p);if(s)clearInterval(s)},autoClose:function(){p=setTimeout(function(){k.events.close()
},l.autoCloseSeconds*1000)},keyClose:function(a){if(k&&a.keyCode===27)k.events.close()},openLink:function(a,b,c){if(a)e.
preventDefault(a);e.callCallBack("promoBoxClick");if(b.indexOf("#promoClose")===-1)window.open(b,c);k.events.close()}},
startPromo:function(){e.callCallBack("promoBoxStart");k.addStyles();k.buildPromo();k.addListeners()}};if(k.init())e.
loadSprite(l.imagePath,function(){window.promoBoxInstanceID=clearTimeout(window.promoBoxInstanceID)||setTimeout(function
(){k.startPromo()},l.loadDelay*1000)})}